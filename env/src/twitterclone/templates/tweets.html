{% extends 'layout.html' %}

{% block content %}
    {% if current_user.is_authenticated %}
        <h2 style="text-align: center; text-decoration: underline;">Welcome back {{current_user.username}}! <img class="rounded-circle article-img profile-pic" src="{{ url_for('static', filename='profile-pictures/' + current_user.image_file) }}" alt="profile-image"></h2>
    {% endif %}

    <form action="{{ url_for('tweets.new_tweet') }}", method="POST">
        <button class="btn btn-outline-primary">Tweet</button>
    </form><br>
    <form action="{{ url_for('users.account') }}">
        <button class="btn btn-primary">Account</button>
    </form><br>

    <!-- Print all tweets -->
    {% for tweet in tweets %}
        <div>
            <h4 class="username"><img class="rounded-circle article-img profile-pic" src="{{ url_for('static', filename='profile-pictures/' + current_user.image_file) }}" alt="profile-image"> <a href="{{ url_for('tweets.user_tweets', username=tweet.author.username) }}">{{ tweet.author.username }}</a></h4>
            <small>Posted on: {{ tweet.date_posted.strftime('%Y-%m-%d') }}</small>
            <p><strong>Tweet: </strong>{{ tweet.tweet_content }}</p>
            <hr>
        </div>
    {% endfor %}
    
    {% if current_user.is_authenticated %}
        <form action="{{ url_for('users.logout') }}">
            <button class="btn btn-danger">Logout</button>
        </form>
    {% endif %}
{% endblock content %}
